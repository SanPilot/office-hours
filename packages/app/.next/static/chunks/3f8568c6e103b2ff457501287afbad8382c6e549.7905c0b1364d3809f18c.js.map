{"version":3,"sources":["webpack:///./hooks/useEventSource.ts","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons-svg/es/asn/NotificationOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons/es/icons/NotificationOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons-svg/es/asn/CloudSyncOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons/es/icons/CloudSyncOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons-svg/es/asn/FrownOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons/es/icons/FrownOutlined.js","webpack:///./components/RenderEvery.tsx","webpack:///./components/Queue/TAStatuses.tsx","webpack:///./components/Queue/QueueListSharedComponents.tsx","webpack:////home/runner/work/office-hours/office-hours/node_modules/antd/es/badge/ScrollNumber.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/antd/es/badge/index.js","webpack:///./hooks/useQueue.ts","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","webpack:///./hooks/useQuestions.ts","webpack:////home/runner/work/office-hours/office-hours/node_modules/reconnecting-eventsource/lib/index.js"],"names":["EVENTSOURCES","useEventSource","url","listenerKey","onmessage","useState","isLive","setIsLive","useEffect","source","eventSource","ReconnectingEventSource","listeners","isLiveSetters","Set","event","values","Object","eventData","JSON","parse","data","forEach","lac","listener","onopen","set","onerror","readyState","EventSource","OPEN","add","count","length","close","props","ref","AntdIcon","assign","icon","displayName","RenderEvery","render","interval","updateState","forceUpdate","useCallback","timer","setInterval","clearInterval","TAStatuses","queueId","questions","useQuestions","staffList","useQueue","queue","taToQuestion","taIds","map","t","id","questionsGettingHelp","question","includes","taHelped","ta","key","StatusCard","taName","name","taPhotoURL","photoURL","studentName","creator","helpedAt","StyledCard","styled","div","CardContent","TAName","HelpingInfo","isBusy","data-cy","size","style","flexShrink","justify","status","HelpingFor","BlueSpan","span","formatWaitTime","Date","now","getTime","Container","QueueTitle","InfoColumnContainer","QueueInfoColumnButtonStyle","Button","QueueInfoColumnButton","block","QueuePropertyRow","QueuePropertyText","StaffH2","h2","QueueRoomGroup","QueueInfoColumn","buttons","room","allowQuestions","title","StopOutlined","color","fontSize","marginLeft","startTime","endTime","ClockCircleOutlined","className","formatQueueTime","notes","QueueUpToDateInfo","lastUpdated","setLastUpdated","secondsAgo","Math","ceil","moment","fromNow","__rest","s","e","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","getNumberArray","num","toString","split","reverse","current","Number","isNaN","_a","customizePrefixCls","prefixCls","customizeCount","_a$component","component","displayComponent","_a$onAnimated","onAnimated","restProps","_React$useState","_React$useState2","animateStarted","setAnimateStarted","_React$useState3","_React$useState4","setCount","_React$useState5","_React$useState6","prevCount","setPrevCount","_React$useState7","_React$useState8","lastCount","setLastCount","getPrefixCls","timeout","setTimeout","clearTimeout","renderCurrentNumber","position","currentCount","abs","lstCount","currentDigit","lastDigit","getPositionByNum","removeTransition","undefined","concat","transition","msTransform","WebkitTransform","transform","childrenToReturn","push","renderNumberList","newProps","borderColor","boxShadow","isPresetColor","_classNames2","_classNames3","customizeScrollNumberPrefixCls","scrollNumberPrefixCls","children","text","_a$count","_a$overflowCount","overflowCount","_a$dot","dot","offset","_a$showZero","showZero","_React$useContext","direction","getNumberedDisplayCount","hasStatus","isZero","numberedDisplayCount","isDot","getDisplayCount","getStyleWithOffset","left","parseInt","marginTop","right","isHidden","displayCount","renderDisplayComponent","customNode","statusCls","statusStyle","background","badgeClassName","styleWithOffset","statusTextColor","Animate","showProp","transitionName","transitionAppear","_classNames","bDot","hidden","scrollNumberCls","renderBadgeNumber","REFRESH_INFO","callOnUpdates","refreshInfo","onUpdates","cb","qid","onUpdate","mutate","plainToClass","GetQueueResponse","useSWR","a","API","queues","get","refreshInterval","onSuccess","_","queueError","error","mutateQueue","ListQuestionsResponse","index","questionsError","mutateQuestions","module","exports","modules","installedModules","__webpack_require__","moduleId","l","m","c","d","getter","o","defineProperty","enumerable","r","Symbol","toStringTag","value","mode","__esModule","ns","create","bind","n","object","property","obj","_reconnectingEventsource","_reconnectingEventsource2","default","_createClass","defineProperties","target","descriptor","configurable","writable","Constructor","protoProps","staticProps","_toConsumableArray","arr","Array","isArray","arr2","from","configuration","_this","this","instance","TypeError","_classCallCheck","_configuration","_eventSource","_lastEventId","_timer","_listeners","max_retry_time","lastEventId","_onevent_wrapped","_onevent","_start","_this2","encodeURIComponent","_onopen","_onerror","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","iterator","next","done","type","addEventListener","err","return","_this3","round","random","listenersForType","_arr","_i","inType","callback","updatedListenersForType","filter","removeEventListener"],"mappings":"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","file":"static/chunks/3f8568c6e103b2ff457501287afbad8382c6e549.7905c0b1364d3809f18c.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport ReconnectingEventSource from \"reconnecting-eventsource\";\n\ninterface ListenerAndCount {\n  listener: (d: any) => void;\n  count: number;\n}\n\ninterface SourceAndCount {\n  eventSource: EventSource;\n  listeners: Record<string, ListenerAndCount>;\n  isLiveSetters: Set<(live: boolean) => void>;\n}\nconst EVENTSOURCES: Record<string, SourceAndCount> = {};\n\n/**\n * Listen to eventsource at given url calling the given onmessage when messages are received.\n * onmessage is overwritten if listenerKey is the same.\n * Returns whether the event source is connected\n * @param url URL to subscribe event source to\n * @param listenerKey key of the listener. eg: \"queue\" or \"question\"\n * @param onmessage callback when messages are received\n */\nexport const useEventSource = (\n  url: string,\n  listenerKey: string,\n  onmessage: (d: any) => void\n): boolean => {\n  const [isLive, setIsLive] = useState<boolean>(false);\n  useEffect(() => {\n    if (url) {\n      let source: SourceAndCount;\n      if (url in EVENTSOURCES) {\n        source = EVENTSOURCES[url];\n      } else {\n        source = {\n          eventSource: new ReconnectingEventSource(url),\n          listeners: {},\n          isLiveSetters: new Set(),\n        };\n        EVENTSOURCES[url] = source;\n        source.eventSource.onmessage = function logEvents(event) {\n          const values = Object.values(source.listeners);\n          const eventData = JSON.parse(event.data);\n          values.forEach((lac) => lac.listener(eventData));\n        };\n        source.eventSource.onopen = () =>\n          source.isLiveSetters.forEach((set) => set(true));\n        source.eventSource.onerror = () =>\n          source.isLiveSetters.forEach((set) => set(false));\n      }\n\n      setIsLive(source.eventSource.readyState === EventSource.OPEN);\n      source.isLiveSetters.add(setIsLive);\n\n      let listener = source.listeners[listenerKey];\n\n      if (source.listeners[listenerKey]) {\n        listener.count++;\n      } else {\n        listener = { listener: onmessage, count: 1 };\n        source.listeners[listenerKey] = listener;\n      }\n\n      return () => {\n        // Close event source if no one is listening\n        listener.count--;\n        source.isLiveSetters.delete(setIsLive);\n        if (listener.count === 0) {\n          delete source.listeners[listenerKey];\n          if (Object.values(source.listeners).length === 0) {\n            source.eventSource.close();\n            delete EVENTSOURCES[url];\n          }\n        }\n      };\n    }\n  }, [url, onmessage, listenerKey]);\n\n  return isLive;\n};\n","// This icon file is generated automatically.\nvar NotificationOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112c-3.8 0-7.7.7-11.6 2.3L292 345.9H128c-8.8 0-16 7.4-16 16.6v299c0 9.2 7.2 16.6 16 16.6h101.7c-3.7 11.6-5.7 23.9-5.7 36.4 0 65.9 53.8 119.5 120 119.5 55.4 0 102.1-37.6 115.9-88.4l408.6 164.2c3.9 1.5 7.8 2.3 11.6 2.3 16.9 0 32-14.2 32-33.2V145.2C912 126.2 897 112 880 112zM344 762.3c-26.5 0-48-21.4-48-47.8 0-11.2 3.9-21.9 11-30.4l84.9 34.1c-2 24.6-22.7 44.1-47.9 44.1zm496 58.4L318.8 611.3l-12.9-5.2H184V417.9h121.9l12.9-5.2L840 203.3v617.4z\" } }] }, \"name\": \"notification\", \"theme\": \"outlined\" };\nexport default NotificationOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport NotificationOutlinedSvg from \"@ant-design/icons-svg/es/asn/NotificationOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar NotificationOutlined = function NotificationOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: NotificationOutlinedSvg\n  }));\n};\n\nNotificationOutlined.displayName = 'NotificationOutlined';\nexport default React.forwardRef(NotificationOutlined);","// This icon file is generated automatically.\nvar CloudSyncOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z\" } }] }, \"name\": \"cloud-sync\", \"theme\": \"outlined\" };\nexport default CloudSyncOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CloudSyncOutlinedSvg from \"@ant-design/icons-svg/es/asn/CloudSyncOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CloudSyncOutlined = function CloudSyncOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: CloudSyncOutlinedSvg\n  }));\n};\n\nCloudSyncOutlined.displayName = 'CloudSyncOutlined';\nexport default React.forwardRef(CloudSyncOutlined);","// This icon file is generated automatically.\nvar FrownOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z\" } }] }, \"name\": \"frown\", \"theme\": \"outlined\" };\nexport default FrownOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FrownOutlinedSvg from \"@ant-design/icons-svg/es/asn/FrownOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FrownOutlined = function FrownOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: FrownOutlinedSvg\n  }));\n};\n\nFrownOutlined.displayName = 'FrownOutlined';\nexport default React.forwardRef(FrownOutlined);","import {\n  useState,\n  useEffect,\n  useCallback,\n  ReactElement,\n  ReactNode,\n} from \"react\";\n\ninterface RenderEveryProps {\n  render: () => ReactNode;\n  /** ms between rerenders */\n  interval: number;\n}\nexport function RenderEvery({\n  render,\n  interval,\n}: RenderEveryProps): ReactElement {\n  const [, updateState] = useState({});\n  const forceUpdate = useCallback(() => updateState({}), []);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      forceUpdate();\n    }, interval);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, [forceUpdate, interval]);\n\n  return <>{render()}</>;\n}\n","import { Question } from \"@koh/common\";\nimport { Badge, Col, Row } from \"antd\";\nimport React, { ReactElement } from \"react\";\nimport styled from \"styled-components\";\nimport { useQuestions } from \"../../hooks/useQuestions\";\nimport { useQueue } from \"../../hooks/useQueue\";\nimport { formatWaitTime } from \"../../utils/TimeUtil\";\nimport { KOHAvatar } from \"../common/SelfAvatar\";\nimport { RenderEvery } from \"../RenderEvery\";\n\ninterface StatusRowProps {\n  queueId: number;\n}\n/**\n * Row of ta statuses\n */\nexport function TAStatuses({ queueId }: StatusRowProps): ReactElement {\n  const { questions } = useQuestions(queueId);\n  const {\n    queue: { staffList },\n  } = useQueue(queueId);\n  if (!questions) {\n    return null;\n  }\n\n  const taToQuestion: Record<number, Question> = {};\n  const taIds = staffList.map((t) => t.id);\n  const helpingQuestions = questions.questionsGettingHelp;\n  for (const question of helpingQuestions) {\n    if (taIds.includes(question.taHelped?.id)) {\n      taToQuestion[question.taHelped.id] = question;\n    }\n  }\n  return (\n    <Col>\n      {staffList.map((ta) => (\n        <Col key={ta.id}>\n          <StatusCard\n            taName={ta.name}\n            taPhotoURL={ta.photoURL}\n            studentName={taToQuestion[ta.id]?.creator?.name}\n            helpedAt={taToQuestion[ta.id]?.helpedAt}\n          />\n        </Col>\n      ))}\n    </Col>\n  );\n}\n\nconst StyledCard = styled.div`\n  background: #ffffff;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.15);\n  border-radius: 6px;\n  padding: 16px;\n  display: flex;\n  margin-bottom: 16px;\n`;\n\nconst CardContent = styled.div`\n  margin-left: 16px;\n`;\nconst TAName = styled.div`\n  font-weight: bold;\n  color: #212934;\n`;\nconst HelpingInfo = styled.div`\n  margin-top: 5px;\n  font-style: italic;\n`;\n\ninterface StatusCardProps {\n  taName: string;\n  taPhotoURL: string;\n  studentName?: string;\n  helpedAt?: Date;\n}\n/**\n * View component just renders TA status\n */\nfunction StatusCard({\n  taName,\n  taPhotoURL,\n  studentName,\n  helpedAt,\n}: StatusCardProps): ReactElement {\n  const isBusy = !!helpedAt;\n  return (\n    <StyledCard data-cy=\"ta-status-card\">\n      <KOHAvatar\n        size={48}\n        name={taName}\n        photoURL={taPhotoURL}\n        style={{ flexShrink: 0 }}\n      />\n      <CardContent>\n        <Row justify=\"space-between\">\n          <TAName>{taName}</TAName>\n          <span>\n            <Badge status={isBusy ? \"processing\" : \"success\"} />\n            {isBusy ? \"Busy\" : \"Available\"}\n          </span>\n        </Row>\n        <HelpingInfo>\n          {isBusy ? (\n            <HelpingFor studentName={studentName} helpedAt={helpedAt} />\n          ) : (\n            \"Looking for my next student...\"\n          )}\n        </HelpingInfo>\n      </CardContent>\n    </StyledCard>\n  );\n}\n\nconst BlueSpan = styled.span`\n  color: #66a3d6;\n`;\ninterface HelpingForProps {\n  studentName: string;\n  helpedAt: Date;\n}\nfunction HelpingFor({ studentName, helpedAt }: HelpingForProps): ReactElement {\n  return (\n    <RenderEvery\n      render={() => (\n        <span>\n          Helping <BlueSpan>{studentName ?? \"a student\"}</BlueSpan> for{\" \"}\n          <BlueSpan>\n            {formatWaitTime((Date.now() - helpedAt.getTime()) / 60000)}\n          </BlueSpan>\n        </span>\n      )}\n      interval={60 * 1000}\n    />\n  );\n}\n","import {\n  ClockCircleOutlined,\n  CloudSyncOutlined,\n  FrownOutlined,\n  NotificationOutlined,\n  StopOutlined,\n} from \"@ant-design/icons\";\nimport { Button, Tooltip } from \"antd\";\nimport { ButtonProps } from \"antd/lib/button\";\nimport moment from \"moment\";\nimport React, { ReactElement, ReactNode, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useQueue } from \"../../hooks/useQueue\";\nimport { formatQueueTime } from \"../../utils/TimeUtil\";\nimport { RenderEvery } from \"../RenderEvery\";\nimport { TAStatuses } from \"./TAStatuses\";\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst QueueTitle = styled.div`\n  font-weight: 500;\n  font-size: 24px;\n  color: #212934;\n`;\n\nexport const NotesText = styled.div`\n  font-size: 16px;\n  color: #5f6b79;\n`;\n\n// New queue styled components start here\n\nconst InfoColumnContainer = styled.div`\n  flex-shrink: 0;\n  padding-bottom: 30px;\n  @media (min-width: 650px) {\n    margin-top: 32px;\n    width: 290px;\n  }\n`;\n\nconst QueueInfoColumnButtonStyle = styled(Button)`\n  font-weight: 500;\n  font-size: 14px;\n  border: 1px solid #cfd6de;\n  border-radius: 6px;\n  margin-bottom: 12px;\n`;\n\nexport const QueueInfoColumnButton = (props: ButtonProps): ReactElement => (\n  <QueueInfoColumnButtonStyle size=\"large\" block {...props} />\n);\n\nconst QueuePropertyRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center; // This kinda funky, not sure how to align the tops of the row\n  margin-bottom: 20px;\n  color: #5f6b79;\n  font-size: 20px;\n`;\n\nconst QueuePropertyText = styled.div`\n  margin-left: 12px;\n  font-size: 16px;\n\n  // To break text in flexbox\n  min-width: 0;\n  overflow-wrap: break-word;\n`;\n\nconst StaffH2 = styled.h2`\n  margin-top: 32px;\n`;\n\nconst QueueRoomGroup = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 24px;\n`;\ninterface QueueInfoColumnProps {\n  queueId: number;\n  buttons: ReactNode;\n}\n\nexport function QueueInfoColumn({\n  queueId,\n  buttons,\n}: QueueInfoColumnProps): ReactElement {\n  const { queue } = useQueue(queueId);\n  return (\n    <InfoColumnContainer>\n      <QueueRoomGroup>\n        <QueueTitle>{queue?.room}</QueueTitle>\n        {!queue.allowQuestions && (\n          <Tooltip title=\"This queue is no longer accepting questions\">\n            <StopOutlined\n              data-cy=\"stopQuestions\"\n              style={{ color: \"red\", fontSize: \"24px\", marginLeft: \"8px\" }}\n            />\n          </Tooltip>\n        )}\n      </QueueRoomGroup>\n\n      {queue.startTime && queue.endTime && (\n        <QueuePropertyRow>\n          <ClockCircleOutlined />\n          <QueuePropertyText className={\"hide-in-percy\"}>\n            {formatQueueTime(queue)}\n          </QueuePropertyText>\n        </QueuePropertyRow>\n      )}\n      {queue?.notes && (\n        <QueuePropertyRow>\n          <NotificationOutlined />\n          <QueuePropertyText>{queue.notes}</QueuePropertyText>\n        </QueuePropertyRow>\n      )}\n      <QueueUpToDateInfo queueId={queueId} />\n      {buttons}\n      <StaffH2>Staff</StaffH2>\n      <TAStatuses queueId={queueId} />\n    </InfoColumnContainer>\n  );\n}\n\nfunction QueueUpToDateInfo({ queueId }: { queueId: number }): ReactElement {\n  const [lastUpdated, setLastUpdated] = useState(null);\n  const { isLive } = useQueue(queueId, setLastUpdated);\n  return (\n    <QueuePropertyRow>\n      {isLive || lastUpdated ? <CloudSyncOutlined /> : <FrownOutlined />}\n      <QueuePropertyText>\n        {isLive ? (\n          \"Queue up to date\"\n        ) : lastUpdated ? (\n          <RenderEvery\n            render={() => {\n              const secondsAgo = (Date.now() - lastUpdated.getTime()) / 1000;\n              return `Queue updated ${\n                secondsAgo < 60\n                  ? Math.ceil(secondsAgo) + \"s\"\n                  : moment(lastUpdated).fromNow(true)\n              } ago`;\n            }}\n            interval={1000}\n          />\n        ) : (\n          \"Queue may be out of date\"\n        )}\n      </QueuePropertyText>\n    </QueuePropertyRow>\n  );\n}\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigContext } from '../config-provider';\nimport { cloneElement } from '../_util/reactNode';\n\nfunction getNumberArray(num) {\n  return num ? num.toString().split('').reverse().map(function (i) {\n    var current = Number(i);\n    return isNaN(current) ? i : current;\n  }) : [];\n}\n\nfunction renderNumberList(position, className) {\n  var childrenToReturn = [];\n\n  for (var i = 0; i < 30; i++) {\n    childrenToReturn.push( /*#__PURE__*/React.createElement(\"p\", {\n      key: i.toString(),\n      className: classNames(className, {\n        current: position === i\n      })\n    }, i % 10));\n  }\n\n  return childrenToReturn;\n}\n\nvar ScrollNumber = function ScrollNumber(_a) {\n  var customizePrefixCls = _a.prefixCls,\n      customizeCount = _a.count,\n      className = _a.className,\n      style = _a.style,\n      title = _a.title,\n      _a$component = _a.component,\n      component = _a$component === void 0 ? 'sup' : _a$component,\n      displayComponent = _a.displayComponent,\n      _a$onAnimated = _a.onAnimated,\n      onAnimated = _a$onAnimated === void 0 ? function () {} : _a$onAnimated,\n      restProps = __rest(_a, [\"prefixCls\", \"count\", \"className\", \"style\", \"title\", \"component\", \"displayComponent\", \"onAnimated\"]);\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      animateStarted = _React$useState2[0],\n      setAnimateStarted = _React$useState2[1];\n\n  var _React$useState3 = React.useState(customizeCount),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      count = _React$useState4[0],\n      setCount = _React$useState4[1];\n\n  var _React$useState5 = React.useState(customizeCount),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      prevCount = _React$useState6[0],\n      setPrevCount = _React$useState6[1];\n\n  var _React$useState7 = React.useState(customizeCount),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      lastCount = _React$useState8[0],\n      setLastCount = _React$useState8[1];\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var prefixCls = getPrefixCls('scroll-number', customizePrefixCls);\n\n  if (prevCount !== customizeCount) {\n    setAnimateStarted(true);\n    setPrevCount(customizeCount);\n  }\n\n  React.useEffect(function () {\n    setLastCount(count);\n    var timeout;\n\n    if (animateStarted) {\n      // Let browser has time to reset the scroller before actually\n      // performing the transition.\n      timeout = setTimeout(function () {\n        setAnimateStarted(false);\n        setCount(customizeCount);\n        onAnimated();\n      });\n    }\n\n    return function () {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [animateStarted, customizeCount, onAnimated]);\n\n  var getPositionByNum = function getPositionByNum(num, i) {\n    var currentCount = Math.abs(Number(count));\n    var lstCount = Math.abs(Number(lastCount));\n    var currentDigit = Math.abs(getNumberArray(count)[i]);\n    var lastDigit = Math.abs(getNumberArray(lstCount)[i]);\n\n    if (animateStarted) {\n      return 10 + num;\n    } // 同方向则在同一侧切换数字\n\n\n    if (currentCount > lstCount) {\n      if (currentDigit >= lastDigit) {\n        return 10 + num;\n      }\n\n      return 20 + num;\n    }\n\n    if (currentDigit <= lastDigit) {\n      return 10 + num;\n    }\n\n    return num;\n  };\n\n  var renderCurrentNumber = function renderCurrentNumber(num, i) {\n    if (typeof num === 'number') {\n      var position = getPositionByNum(num, i);\n      var removeTransition = animateStarted || getNumberArray(lastCount)[i] === undefined;\n      return /*#__PURE__*/React.createElement('span', {\n        className: \"\".concat(prefixCls, \"-only\"),\n        style: {\n          transition: removeTransition ? 'none' : undefined,\n          msTransform: \"translateY(\".concat(-position * 100, \"%)\"),\n          WebkitTransform: \"translateY(\".concat(-position * 100, \"%)\"),\n          transform: \"translateY(\".concat(-position * 100, \"%)\")\n        },\n        key: i\n      }, renderNumberList(position, \"\".concat(prefixCls, \"-only-unit\")));\n    }\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      key: \"symbol\",\n      className: \"\".concat(prefixCls, \"-symbol\")\n    }, num);\n  };\n\n  var renderNumberElement = function renderNumberElement() {\n    if (count && Number(count) % 1 === 0) {\n      return getNumberArray(count).map(function (num, i) {\n        return renderCurrentNumber(num, i);\n      }).reverse();\n    }\n\n    return count;\n  };\n\n  var newProps = _extends(_extends({}, restProps), {\n    style: style,\n    className: classNames(prefixCls, className),\n    title: title\n  }); // allow specify the border\n  // mock border-color by box-shadow for compatible with old usage:\n  // <Badge count={4} style={{ backgroundColor: '#fff', color: '#999', borderColor: '#d9d9d9' }} />\n\n\n  if (style && style.borderColor) {\n    newProps.style = _extends(_extends({}, style), {\n      boxShadow: \"0 0 0 1px \".concat(style.borderColor, \" inset\")\n    });\n  }\n\n  if (displayComponent) {\n    return cloneElement(displayComponent, {\n      className: classNames(\"\".concat(prefixCls, \"-custom-component\"), displayComponent.props && displayComponent.props.className)\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(component, newProps, renderNumberElement());\n};\n\nexport default ScrollNumber;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport Animate from 'rc-animate';\nimport classNames from 'classnames';\nimport ScrollNumber from './ScrollNumber';\nimport { PresetColorTypes } from '../_util/colors';\nimport { ConfigContext } from '../config-provider';\nimport { cloneElement } from '../_util/reactNode';\n\nfunction isPresetColor(color) {\n  return PresetColorTypes.indexOf(color) !== -1;\n}\n\nvar Badge = function Badge(_a) {\n  var _classNames2, _classNames3;\n\n  var customizePrefixCls = _a.prefixCls,\n      customizeScrollNumberPrefixCls = _a.scrollNumberPrefixCls,\n      children = _a.children,\n      status = _a.status,\n      text = _a.text,\n      color = _a.color,\n      _a$count = _a.count,\n      count = _a$count === void 0 ? null : _a$count,\n      _a$overflowCount = _a.overflowCount,\n      overflowCount = _a$overflowCount === void 0 ? 99 : _a$overflowCount,\n      _a$dot = _a.dot,\n      dot = _a$dot === void 0 ? false : _a$dot,\n      title = _a.title,\n      offset = _a.offset,\n      style = _a.style,\n      className = _a.className,\n      _a$showZero = _a.showZero,\n      showZero = _a$showZero === void 0 ? false : _a$showZero,\n      restProps = __rest(_a, [\"prefixCls\", \"scrollNumberPrefixCls\", \"children\", \"status\", \"text\", \"color\", \"count\", \"overflowCount\", \"dot\", \"title\", \"offset\", \"style\", \"className\", \"showZero\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var prefixCls = getPrefixCls('badge', customizePrefixCls);\n\n  var getNumberedDisplayCount = function getNumberedDisplayCount() {\n    var displayCount = count > overflowCount ? \"\".concat(overflowCount, \"+\") : count;\n    return displayCount;\n  };\n\n  var hasStatus = function hasStatus() {\n    return !!status || !!color;\n  };\n\n  var isZero = function isZero() {\n    var numberedDisplayCount = getNumberedDisplayCount();\n    return numberedDisplayCount === '0' || numberedDisplayCount === 0;\n  };\n\n  var isDot = function isDot() {\n    return dot && !isZero() || hasStatus();\n  };\n\n  var getDisplayCount = function getDisplayCount() {\n    // dot mode don't need count\n    if (isDot()) {\n      return '';\n    }\n\n    return getNumberedDisplayCount();\n  };\n\n  var getScrollNumberTitle = function getScrollNumberTitle() {\n    if (title) {\n      return title;\n    }\n\n    return typeof count === 'string' || typeof count === 'number' ? count : undefined;\n  };\n\n  var getStyleWithOffset = function getStyleWithOffset() {\n    if (direction === 'rtl') {\n      return offset ? _extends({\n        left: parseInt(offset[0], 10),\n        marginTop: offset[1]\n      }, style) : style;\n    }\n\n    return offset ? _extends({\n      right: -parseInt(offset[0], 10),\n      marginTop: offset[1]\n    }, style) : style;\n  };\n\n  var isHidden = function isHidden() {\n    var displayCount = getDisplayCount();\n    var isEmpty = displayCount === null || displayCount === undefined || displayCount === '';\n    return (isEmpty || isZero() && !showZero) && !isDot();\n  };\n\n  var renderStatusText = function renderStatusText() {\n    var hidden = isHidden();\n    return hidden || !text ? null : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-status-text\")\n    }, text);\n  };\n\n  var renderDisplayComponent = function renderDisplayComponent() {\n    var customNode = count;\n\n    if (!customNode || _typeof(customNode) !== 'object') {\n      return undefined;\n    }\n\n    return cloneElement(customNode, {\n      style: _extends(_extends({}, getStyleWithOffset()), customNode.props && customNode.props.style)\n    });\n  };\n\n  var renderBadgeNumber = function renderBadgeNumber() {\n    var _classNames;\n\n    var scrollNumberPrefixCls = getPrefixCls('scroll-number', customizeScrollNumberPrefixCls);\n    var displayCount = getDisplayCount();\n    var bDot = isDot();\n    var hidden = isHidden();\n    var scrollNumberCls = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-dot\"), bDot), _defineProperty(_classNames, \"\".concat(prefixCls, \"-count\"), !bDot), _defineProperty(_classNames, \"\".concat(prefixCls, \"-multiple-words\"), !bDot && count && count.toString && count.toString().length > 1), _defineProperty(_classNames, \"\".concat(prefixCls, \"-status-\").concat(status), !!status), _defineProperty(_classNames, \"\".concat(prefixCls, \"-status-\").concat(color), isPresetColor(color)), _classNames));\n    var statusStyle = getStyleWithOffset();\n\n    if (color && !isPresetColor(color)) {\n      statusStyle = statusStyle || {};\n      statusStyle.background = color;\n    }\n\n    return hidden ? null : /*#__PURE__*/React.createElement(ScrollNumber, {\n      prefixCls: scrollNumberPrefixCls,\n      \"data-show\": !hidden,\n      className: scrollNumberCls,\n      count: displayCount,\n      displayComponent: renderDisplayComponent() // <Badge status=\"success\" count={<Icon type=\"xxx\" />}></Badge>\n      ,\n      title: getScrollNumberTitle(),\n      style: statusStyle,\n      key: \"scrollNumber\"\n    });\n  };\n\n  var statusCls = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-status-dot\"), hasStatus()), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-status-\").concat(status), !!status), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-status-\").concat(color), isPresetColor(color)), _classNames2));\n  var statusStyle = {};\n\n  if (color && !isPresetColor(color)) {\n    statusStyle.background = color;\n  }\n\n  var badgeClassName = classNames(className, prefixCls, (_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefixCls, \"-status\"), hasStatus()), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-not-a-wrapper\"), !children), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames3)); // <Badge status=\"success\" />\n\n  if (!children && hasStatus()) {\n    var styleWithOffset = getStyleWithOffset();\n    var statusTextColor = styleWithOffset && styleWithOffset.color;\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n      className: badgeClassName,\n      style: styleWithOffset\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: statusCls,\n      style: statusStyle\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: statusTextColor\n      },\n      className: \"\".concat(prefixCls, \"-status-text\")\n    }, text));\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n    className: badgeClassName\n  }), children, /*#__PURE__*/React.createElement(Animate, {\n    component: \"\",\n    showProp: \"data-show\",\n    transitionName: children ? \"\".concat(prefixCls, \"-zoom\") : '',\n    transitionAppear: true\n  }, renderBadgeNumber()), renderStatusText());\n};\n\nexport default Badge;","import { API } from \"@koh/api-client\";\nimport { GetQueueResponse, QueuePartial, SSEQueueResponse } from \"@koh/common\";\nimport useSWR, { mutate, responseInterface } from \"swr\";\nimport { useCallback, useEffect } from \"react\";\nimport { useEventSource } from \"./useEventSource\";\nimport { plainToClass } from \"class-transformer\";\n\ntype queueResponse = responseInterface<QueuePartial, any>;\n\ninterface UseQueueReturn {\n  queue?: queueResponse[\"data\"];\n  queueError: queueResponse[\"error\"];\n  mutateQueue: queueResponse[\"mutate\"];\n  isLive: boolean;\n}\n\ntype OnUpdate = (lastUpdated: Date) => void;\n\ninterface RefreshInfo {\n  lastUpdated: Date;\n  onUpdates: Set<OnUpdate>;\n}\n\n// Keep track of all the different Refresh information and callbacks.\n// This is a global because useQueue can be used multiple times, but SWR's onSuccess overwrites other instances\nconst REFRESH_INFO: Record<string, RefreshInfo> = {};\n\n/**\n * Notify all onUpdate subscribers that new data came in.\n */\nfunction callOnUpdates(key: string) {\n  const refreshInfo = REFRESH_INFO[key];\n  refreshInfo.onUpdates.forEach((cb) => cb(refreshInfo.lastUpdated));\n}\n\n/**\n * Get data for a queue.\n * @param qid Queue ID to get data for\n * @param onUpdate Optional callback to listen for when data is refetched, whether via HTTP or SSE\n */\nexport function useQueue(qid: number, onUpdate?: OnUpdate): UseQueueReturn {\n  const key = qid && `/api/v1/queues/${qid}`;\n  if (!(key in REFRESH_INFO)) {\n    REFRESH_INFO[key] = {\n      lastUpdated: null,\n      onUpdates: new Set(),\n    };\n  }\n\n  // Register onUpdate callback\n  useEffect(() => {\n    if (onUpdate) {\n      const refreshInfo = REFRESH_INFO[key];\n      refreshInfo.onUpdates.add(onUpdate);\n      onUpdate(refreshInfo.lastUpdated);\n      return () => refreshInfo.onUpdates.delete(onUpdate);\n    }\n  }, [onUpdate, key]);\n\n  const isLive = useEventSource(\n    qid && `/api/v1/queues/${qid}/sse`,\n    \"queue\",\n    useCallback(\n      (data: SSEQueueResponse) => {\n        if (data.queue) {\n          mutate(key, plainToClass(GetQueueResponse, data.queue), false);\n          REFRESH_INFO[key].lastUpdated = new Date();\n          callOnUpdates(key);\n        }\n      },\n      [key]\n    )\n  );\n\n  const { data: queue, error: queueError, mutate: mutateQueue } = useSWR(\n    key,\n    useCallback(async () => API.queues.get(Number(qid)), [qid]),\n    {\n      refreshInterval: isLive ? 0 : 10 * 1000,\n      onSuccess: (_, key) => {\n        REFRESH_INFO[key].lastUpdated = new Date();\n        callOnUpdates(key);\n      },\n    }\n  );\n\n  return {\n    queue,\n    queueError,\n    mutateQueue,\n    isLive,\n  };\n}\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default React.forwardRef(DeleteOutlined);","import { API } from \"@koh/api-client\";\nimport { ListQuestionsResponse, SSEQueueResponse } from \"@koh/common\";\nimport { plainToClass } from \"class-transformer\";\nimport { useCallback } from \"react\";\nimport useSWR, { mutate, responseInterface } from \"swr\";\nimport { useEventSource } from \"./useEventSource\";\n\ntype questionsResponse = responseInterface<ListQuestionsResponse, any>;\n\ninterface UseQuestionReturn {\n  questions?: questionsResponse[\"data\"];\n  questionsError: questionsResponse[\"error\"];\n  mutateQuestions: questionsResponse[\"mutate\"];\n}\n\nexport function useQuestions(qid: number): UseQuestionReturn {\n  const key = qid && `/api/v1/queues/${qid}/questions`;\n  // Subscribe to sse\n  const isLive = useEventSource(\n    qid && `/api/v1/queues/${qid}/sse`,\n    \"question\",\n    useCallback(\n      (data: SSEQueueResponse) => {\n        if (data.questions) {\n          mutate(\n            key,\n            plainToClass(ListQuestionsResponse, data.questions),\n            false\n          );\n        }\n      },\n      [key]\n    )\n  );\n\n  const {\n    data: questions,\n    error: questionsError,\n    mutate: mutateQuestions,\n  } = useSWR(key, async () => API.questions.index(Number(qid)), {\n    refreshInterval: isLive ? 0 : 10 * 1000,\n  });\n\n  return { questions, questionsError, mutateQuestions };\n}\n","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _reconnectingEventsource = __webpack_require__(1);\n\nvar _reconnectingEventsource2 = _interopRequireDefault(_reconnectingEventsource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _reconnectingEventsource2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// MIT License:\n//\n// Copyright (C) 2017 Fanout, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\nvar ReconnectingEventSource = function () {\n    function ReconnectingEventSource(url, configuration) {\n        var _this = this;\n\n        _classCallCheck(this, ReconnectingEventSource);\n\n        this._configuration = configuration != null ? Object.assign({}, configuration) : null;\n\n        this._eventSource = null;\n        this._lastEventId = null;\n        this._timer = null;\n        this._listeners = {};\n\n        this.url = url;\n        this.readyState = 0;\n        this.max_retry_time = 3000;\n\n        if (this._configuration != null) {\n            if (this._configuration.lastEventId) {\n                this._lastEventId = this._configuration.lastEventId;\n                delete this._configuration['lastEventId'];\n            }\n\n            if (this._configuration.max_retry_time) {\n                this.max_retry_time = this._configuration.max_retry_time;\n                delete this._configuration['max_retry_time'];\n            }\n        }\n\n        this._onevent_wrapped = function (event) {\n            _this._onevent(event);\n        };\n\n        this._start();\n    }\n\n    _createClass(ReconnectingEventSource, [{\n        key: '_start',\n        value: function _start() {\n            var _this2 = this;\n\n            var url = this.url;\n\n            if (this._lastEventId) {\n                if (url.indexOf('?') === -1) {\n                    url += '?';\n                } else {\n                    url += '&';\n                }\n                url += 'lastEventId=' + encodeURIComponent(this._lastEventId);\n            }\n\n            this._eventSource = new EventSource(url, this._configuration);\n\n            this._eventSource.onopen = function (event) {\n                _this2._onopen(event);\n            };\n            this._eventSource.onerror = function (event) {\n                _this2._onerror(event);\n            };\n            this._eventSource.onmessage = function (event) {\n                _this2.onmessage(event);\n            };\n\n            // apply listen types\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = Object.keys(this._listeners)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var type = _step.value;\n\n                    this._eventSource.addEventListener(type, this._onevent_wrapped);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    }, {\n        key: '_onopen',\n        value: function _onopen(event) {\n            if (this.readyState === 0) {\n                this.readyState = 1;\n                this.onopen(event);\n            }\n        }\n    }, {\n        key: '_onerror',\n        value: function _onerror(event) {\n            var _this3 = this;\n\n            if (this.readyState === 1) {\n                this.readyState = 0;\n                this.onerror(event);\n            }\n\n            if (this._eventSource) {\n                if (this._eventSource.readyState === 2) {\n                    // reconnect with new object\n                    this._eventSource.close();\n                    this._eventSource = null;\n\n                    // reconnect after random timeout < max_retry_time\n                    var timeout = Math.round(this.max_retry_time * Math.random());\n                    this._timer = setTimeout(function () {\n                        return _this3._start();\n                    }, timeout);\n                }\n            }\n        }\n    }, {\n        key: '_onevent',\n        value: function _onevent(event) {\n            if (event.lastEventId) {\n                this._lastEventId = event.lastEventId;\n            }\n\n            var listenersForType = this._listeners[event.type];\n            if (listenersForType != null) {\n                // operate on a copy\n                var _arr = [].concat(_toConsumableArray(listenersForType));\n\n                for (var _i = 0; _i < _arr.length; _i++) {\n                    var listener = _arr[_i];\n                    listener(event);\n                }\n            }\n\n            if (event.type === 'message') {\n                this.onmessage(event);\n            }\n        }\n    }, {\n        key: 'onopen',\n        value: function onopen(event) {\n            // may be overridden\n        }\n    }, {\n        key: 'onerror',\n        value: function onerror(event) {\n            // may be overridden\n        }\n    }, {\n        key: 'onmessage',\n        value: function onmessage(event) {\n            // may be overridden\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            if (this._timer) {\n                clearTimeout(this._timer);\n                this._timer = null;\n            }\n\n            if (this._eventSource) {\n                this._eventSource.close();\n                this._eventSource = null;\n            }\n\n            this.readyState = 2;\n        }\n    }, {\n        key: 'addEventListener',\n        value: function addEventListener(inType, callback) {\n            var type = inType.toString();\n\n            if (!(type in this._listeners)) {\n                this._listeners[type] = [];\n                if (this._eventSource) {\n                    this._eventSource.addEventListener(type, this._onevent_wrapped);\n                }\n            }\n\n            var listenersForType = this._listeners[type];\n            if (!listenersForType.includes(callback)) {\n                this._listeners[type] = [].concat(_toConsumableArray(listenersForType), [callback]);\n            }\n        }\n    }, {\n        key: 'removeEventListener',\n        value: function removeEventListener(inType, callback) {\n            var type = inType.toString();\n\n            if (type in this._listeners) {\n\n                var listenersForType = this._listeners[type];\n\n                var updatedListenersForType = listenersForType.filter(function (l) {\n                    return l !== callback;\n                });\n\n                if (updatedListenersForType.length > 0) {\n                    this._listeners[type] = updatedListenersForType;\n                } else {\n                    delete this._listeners[type];\n                    if (this._eventSource) {\n                        this._eventSource.removeEventListener(type, this._onevent_wrapped);\n                    }\n                }\n            }\n        }\n    }]);\n\n    return ReconnectingEventSource;\n}();\n\nexports.default = ReconnectingEventSource;\n\n/***/ })\n/******/ ]);"],"sourceRoot":""}