{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { API } from \"@koh/api-client\";\nimport { Role } from \"@koh/common\";\nimport { Col, Row } from \"antd\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport NavBar from \"../../../components/Nav/NavBar\";\nimport SchedulePanel from \"../../../components/Schedule/SchedulePanel\";\nimport OpenQueueCard, { OpenQueueCardSkeleton } from \"../../../components/Today/OpenQueueCard\";\nimport TACheckinButton from \"../../../components/Today/TACheckinButton\";\nimport ReleaseNotes from \"../../../components/Today/ReleaseNotes\";\nimport WelcomeStudents from \"../../../components/Today/WelcomeStudents\";\nimport { useCourse } from \"../../../hooks/useCourse\";\nimport { useRoleInCourse } from \"../../../hooks/useRoleInCourse\";\nvar Container = styled.div.withConfig({\n  displayName: \"today__Container\",\n  componentId: \"guxhv1-0\"\n})([\"margin:32px 64px;@media (max-width:768px){margin:32px 24px;}\"]);\nvar Title = styled.div.withConfig({\n  displayName: \"today__Title\",\n  componentId: \"guxhv1-1\"\n})([\"font-weight:500;font-size:30px;color:#212934;\"]);\nexport default function Today() {\n  var _course$queues, _course$queues2;\n\n  var router = useRouter();\n  var cid = router.query.cid;\n  var role = useRoleInCourse(Number(cid));\n\n  var _useCourse = useCourse(Number(cid)),\n      course = _useCourse.course,\n      mutateCourse = _useCourse.mutateCourse;\n\n  var updateQueueNotes = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(queue, notes) {\n      var newQueues;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              newQueues = course && course.queues.map(function (q) {\n                return q.id === queue.id ? _objectSpread(_objectSpread({}, q), {}, {\n                  notes: notes\n                }) : q;\n              });\n              mutateCourse(_objectSpread(_objectSpread({}, course), {}, {\n                queues: newQueues\n              }), false);\n              _context.next = 4;\n              return API.queues.update(queue.id, {\n                notes: notes,\n                allowQuestions: queue.allowQuestions\n              });\n\n            case 4:\n              mutateCourse();\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateQueueNotes(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, course === null || course === void 0 ? void 0 : course.name, \" | Khoury Office Hours\")), __jsx(ReleaseNotes, null), __jsx(WelcomeStudents, null), __jsx(NavBar, {\n    courseId: Number(cid)\n  }), __jsx(Container, null, __jsx(Row, {\n    gutter: 64\n  }, __jsx(Col, {\n    md: 12,\n    xs: 24\n  }, __jsx(Row, {\n    justify: \"space-between\"\n  }, __jsx(Title, null, \"Current Office Hours\"), role === Role.TA && __jsx(TACheckinButton, {\n    courseId: Number(cid)\n  })), (course === null || course === void 0 ? void 0 : (_course$queues = course.queues) === null || _course$queues === void 0 ? void 0 : _course$queues.length) === 0 ? __jsx(\"h1\", {\n    style: {\n      paddingTop: \"100px\"\n    }\n  }, \"There are currently no scheduled office hours\") : course === null || course === void 0 ? void 0 : (_course$queues2 = course.queues) === null || _course$queues2 === void 0 ? void 0 : _course$queues2.map(function (q) {\n    return __jsx(OpenQueueCard, {\n      key: q.id,\n      queue: q,\n      isTA: role === Role.TA,\n      updateQueueNotes: updateQueueNotes\n    });\n  }), !course && __jsx(OpenQueueCardSkeleton, null)), __jsx(Col, {\n    md: 12,\n    sm: 24\n  }, __jsx(SchedulePanel, {\n    courseId: Number(cid),\n    defaultView: \"day\"\n  })))));\n}","map":{"version":3,"sources":["/home/runner/work/office-hours/office-hours/packages/app/pages/course/[cid]/today.tsx"],"names":["API","Role","Col","Row","Head","useRouter","React","styled","NavBar","SchedulePanel","OpenQueueCard","OpenQueueCardSkeleton","TACheckinButton","ReleaseNotes","WelcomeStudents","useCourse","useRoleInCourse","Container","div","Title","Today","router","cid","query","role","Number","course","mutateCourse","updateQueueNotes","queue","notes","newQueues","queues","map","q","id","update","allowQuestions","name","TA","length","paddingTop"],"mappings":"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","sourcesContent":["import { API } from \"@koh/api-client\";\nimport { QueuePartial, Role } from \"@koh/common\";\nimport { Col, Row } from \"antd\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport React, { ReactElement } from \"react\";\nimport styled from \"styled-components\";\nimport NavBar from \"../../../components/Nav/NavBar\";\nimport SchedulePanel from \"../../../components/Schedule/SchedulePanel\";\nimport OpenQueueCard, {\n  OpenQueueCardSkeleton,\n} from \"../../../components/Today/OpenQueueCard\";\nimport TACheckinButton from \"../../../components/Today/TACheckinButton\";\nimport ReleaseNotes from \"../../../components/Today/ReleaseNotes\";\nimport WelcomeStudents from \"../../../components/Today/WelcomeStudents\";\nimport { useCourse } from \"../../../hooks/useCourse\";\nimport { useRoleInCourse } from \"../../../hooks/useRoleInCourse\";\n\nconst Container = styled.div`\n  margin: 32px 64px;\n  @media (max-width: 768px) {\n    margin: 32px 24px;\n  }\n`;\n\nconst Title = styled.div`\n  font-weight: 500;\n  font-size: 30px;\n  color: #212934;\n`;\n\nexport default function Today(): ReactElement {\n  const router = useRouter();\n  const { cid } = router.query;\n  const role = useRoleInCourse(Number(cid));\n\n  const { course, mutateCourse } = useCourse(Number(cid));\n\n  const updateQueueNotes = async (\n    queue: QueuePartial,\n    notes: string\n  ): Promise<void> => {\n    const newQueues =\n      course &&\n      course.queues.map((q) => (q.id === queue.id ? { ...q, notes } : q));\n\n    mutateCourse({ ...course, queues: newQueues }, false);\n    await API.queues.update(queue.id, {\n      notes,\n      allowQuestions: queue.allowQuestions,\n    });\n    mutateCourse();\n  };\n\n  return (\n    <div>\n      <Head>\n        <title>{course?.name} | Khoury Office Hours</title>\n      </Head>\n      <ReleaseNotes/>\n      <WelcomeStudents />\n      <NavBar courseId={Number(cid)} />\n      <Container>\n        <Row gutter={64}>\n          <Col md={12} xs={24}>\n            <Row justify=\"space-between\">\n              <Title>Current Office Hours</Title>\n              {role === Role.TA && <TACheckinButton courseId={Number(cid)} />}\n            </Row>\n            {course?.queues?.length === 0 ? (\n              <h1 style={{ paddingTop: \"100px\" }}>\n                There are currently no scheduled office hours\n              </h1>\n            ) : (\n              course?.queues?.map((q) => (\n                <OpenQueueCard\n                  key={q.id}\n                  queue={q}\n                  isTA={role === Role.TA}\n                  updateQueueNotes={updateQueueNotes}\n                />\n              ))\n            )}\n            {!course && <OpenQueueCardSkeleton />}\n          </Col>\n          <Col md={12} sm={24}>\n            <SchedulePanel courseId={Number(cid)} defaultView=\"day\" />\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}